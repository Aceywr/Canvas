<!DOCTYPE>
<html>
    <head>
        <meta charset="utf8">
        <title>gravity</title>
        <script>
            window.onload = function() {
                var canvas = document.createElement("canvas"),
                ctx = canvas.getContext("2d");

                canvas.width = 400;
                canvas.height = 400;

                document.body.appendChild(canvas);

               

                window.requestAnimFrame = 
                window.requestAnimationFrame ||
                window.webkitRequestAnimationFrame ||
                window.mozRequestAnimationFrame ||
                window.oRequestAnimationFrame ||
                window.msRequestAnimationFrame ||
                function (callback) {
                    return window.setTimeout(callback, 1000/60);
                }

                var posX =20,
                posY = 200,
                velX = 5,
                velY = -10,
                gravity = 1;
            

                (function loop () {
                    ctx.fillStyle = "black";
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    posX += velX;
                    posY += velY;

                    if (posY > 300) {
                        velY *= -0.7;
                        velX *= 0.7;
                        posY = 300;
                    }
                    velY += gravity;                    
                    ctx.fillStyle ="#fff";
                    ctx.fillRect(posX, posY, 10, 10);
                    requestAnimFrame(loop);
                })();
            };
        </script>
    </head>
    <body>
    </body>
</html>